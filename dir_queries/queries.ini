[database_queries]
fetch_user_data = "SELECT * FROM utente INNER JOIN identificativo ON utente.codice = identificativo.codcliente WHERE identificativo.codice = $1"
count_transactions = "SELECT tipologia.categoria, count(transazione.*) FROM ((transazione INNER JOIN prodotto ON transazione.codprodotto=prodotto.codice) INNER JOIN tipologia ON prodotto.codtipologia = tipologia.categoria) GROUP BY tipologia.categoria"
sum_quantities = "SELECT SUM(quantità) FROM ((transazione INNER JOIN prodotto ON transazione.codprodotto=prodotto.codice) INNER JOIN tipologia ON prodotto.codtipologia = tipologia.categoria)"
count_donations = "SELECT COUNT(*) FROM transazione"
calculate_goals = "SELECT tipologia.categoria, SUM(transazione.quantità) FROM ((transazione INNER JOIN prodotto ON transazione.codprodotto=prodotto.codice) INNER JOIN tipologia ON prodotto.codtipologia = tipologia.categoria) GROUP BY tipologia.categoria"
product_code_by_name = "SELECT codice FROM public.prodotto WHERE nome=($1)"
check_product_exists = "SELECT * FROM public.prodotto WHERE UPPER(nome) LIKE UPPER($1)"
insert_new_product = "INSERT INTO public.prodotto(nome, codtipologia) VALUES ($1, $2)"
insert_transaction = "INSERT INTO public.transazione(momento, codcliente, codprodotto, quantità, scadenza, via, ritiro, tags) VALUES ($1, $2, $3, $4, $5, $6, $7, $8)"
fetch_user_details = "SELECT * FROM utente INNER JOIN identificativo ON utente.codice = identificativo.codcliente WHERE identificativo.codice = $1"
product_code_by_name = "SELECT codice FROM public.prodotto WHERE nome=($1)"
check_product_exists = "SELECT * FROM public.prodotto WHERE UPPER(nome) LIKE UPPER($1)"
insert_new_product = "INSERT INTO public.prodotto(nome, codtipologia) VALUES ($1, $2)"
insert_transaction = "INSERT INTO public.transazione(momento, codcliente, codprodotto, quantità, scadenza, via, ritiro, tags) VALUES ($1, $2, $3, $4, $5, $6, $7, $8)"
fetch_user_details = "SELECT * FROM public.utente INNER JOIN public.identificativo ON public.utente.codice = public.identificativo.codcliente WHERE public.identificativo.codice = $1;"
fetch_order_history = "SELECT public.prodotto.nome, public.tipologia.*, public.transazione.scadenza, public.transazione.quantità, public.transazione.momento, public.transazione.via, public.transazione.ritiro FROM public.tipologia, public.transazione INNER JOIN public.prodotto ON public.transazione.codprodotto=public.prodotto.codice WHERE codcliente=$1 AND public.tipologia.categoria=public.prodotto.codtipologia ORDER BY public.transazione.momento DESC;"
calculate_totals = "SELECT SUM(public.transazione.quantità), public.tipologia.categoria FROM public.tipologia, public.transazione INNER JOIN public.prodotto ON public.transazione.codprodotto=public.prodotto.codice WHERE codcliente=$1 AND public.tipologia.categoria=public.prodotto.codtipologia GROUP BY public.tipologia.categoria;"
[login_queries]
user_authentication = "SELECT * FROM public.utente WHERE email=$1 AND pswd=$2"
insert_identification = "INSERT INTO identificativo (session_id, user_code) VALUES ($1, $2)"
retrieve_user_session = "SELECT public.utente.email, public.utente.pswd FROM public.utente INNER JOIN identificativo ON public.utente.codice = identificativo.codcliente WHERE identificativo.codice = $1"
[registration_queries]
check_user_email = "SELECT * FROM utente WHERE email=$1"
check_user_cf = "SELECT * FROM utente WHERE cf=$1"
insert_new_user = "INSERT INTO public.utente(nome, cognome, email, pswd, cap, cellulare, cf, città, via, regione) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)"
[session_queries]
delete_session = "DELETE FROM identificativo WHERE codice=$1"
